<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

	<meta charset="utf-8">
    <title>admin 后台管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="http://fonts.googleapis.com/css?family=Oxygen|Marck+Script" rel="stylesheet" type="text/css">
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.css" rel="stylesheet">
    <link href="/assets/css/admin.css" rel="stylesheet">
    <link href="/layui/css/layui.css">
    <script type="text/javascript">
        
        

    </script>
    <style type="text/css">
       #picture p{
        color: red;
       }
        #saveHistory:hover{
        cursor: pointer;
      }
 
    </style>
</head>    
<body>

<div class="container">
		
	<div class="row">
        <div th:replace="head::minHead"></div>
	<div class="span10">
	<div class="secondary-masthead">
		<ul class="nav nav-pills pull-right">
			<li>
                <a href="/index/loginout"><i class="icon-globe"></i> Logout</a>
			</li>
		</ul>

		<ul class="breadcrumb">
			<li>
				<a href="#">Admin</a> <span class="divider">/</span>
			</li>
			<li class="active">医院信息</li>
		</ul>
	</div>
	</div> 

     <div id="picture" style="width: 970px;height: 800px;margin-left: 230px;margin-top: 100px;">
         <form id="form">
              <input id="historyId" type="hidden" name="id" th:value="${history ne null?history.id:null}"/>
         <div style="width: 970px;height: 40px;line-height: 40px;">
           <span style="float: left;">医院名称：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 200px;height: 40px;float: left;">
               <input id="historyName" th:value="${history ne null?history.name:null}" name="name" type="text" style="width: 200px;"/>
           </div>
           <div style="width: 100px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="nameMessage"></p></div>
         </div><br>
         <div style="width: 970px;height: 40px;line-height: 40px;">
           <span style="float: left;" >联系电话：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 200px;height: 40px;float: left;">
               <input th:value="${history ne null?history.phone:null}" id="histoyPhone" name="phone" type="text" style="width: 200px;"/>
           </div>
           <div  style="width: 200px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="phoneMessage"></p></div>
         </div><br>
          <div style="width: 970px;height: 40px;line-height: 40px;">
           <span style="float: left;">联系地址：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 400px;height: 40px;float: left;">
               <input   th:value="${history ne null?history.address:null}" id="historyAddress" name="address" type="text" style="width: 400px;"/>
           </div>
           <div style="width: 100px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="addressMessage">*具体信息</p></div>
         </div><br>
          <div style="width: 970px;height: 40px;line-height: 40px;">
           <span style="float: left;" >医院简介：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 400px;height: 40px;float: left;">
              <textarea th:text="${history ne null?history.description:null}" id="historyDescription" name="description" rows="5" style="width: 400px;">
              </textarea>
           </div>
              <div style="width: 200px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="descMessage"></p></div>
          </div>


        <br><br><br><br>
          <div style="width: 970px;height: 100px;line-height: 40px;">
           <span style="float: left;">擅长领域：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 800px;height: 100px;float: left;" id="type" >
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',1,'))?true:false}" type="checkbox" value="1">皮肤性病科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',2,'))?true:false}" type="checkbox" value="2">消化内科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',3,'))?true:false}" type="checkbox" value="3">内分泌科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',4,'))?true:false}" type="checkbox" value="4">呼吸内科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',5,'))?true:false}" type="checkbox" value="5">妇产科</input><br>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',6,'))?true:false}" type="checkbox" value="6">眼科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',7,'))?true:false}" type="checkbox" value="7">肝胆胰腺外科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',8,'))?true:false}" type="checkbox" value="8">风湿免疫科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',9,'))?true:false}" type="checkbox" value="9">泌尿外科</input><br>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',10,'))?true:false}" type="checkbox" value="10">普通内科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',11,'))?true:false}" type="checkbox" value="11">普外科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',12,'))?true:false}" type="checkbox" value="12">儿科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',13,'))?true:false}" type="checkbox" value="13">神经内科</input>
               <input name="kingdom" th:attr="checked=${(history ne null && (','+history.kingdom+',').contains(',14,'))?true:false}" type="checkbox" value="14">其他</input>
           </div>
              <div style="width: 200px;height: 40px;top:-20px;left: 450px;line-height: 40px;position: relative;"><p id="kingMessage">*至少选择一样</p></div>
         </div><br>
             <input type="reset" name="reset" style="display: none;" />
         </form>
      </div>

     </div>

	</div> 
</div> 
 <div id="saveHistory" onclick="saveHistory()" style="background-color: red;width: 40px;height: 20px;border-radius: 10px;text-align: center;line-height: 20px;margin-left: 200px;margin-top: -300px;"><p style="color: white;font-size: 10px;">保存</p></div>
 <script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.js"></script>
<script src="/layui/layui.js"></script>
<script  type="text/javascript">
    function saveHistory() {

        var name = $("#historyName").val();
        var phone = $("#histoyPhone").val();
        var address = $("#historyAddress").val();
        var desc = $("#historyDescription").val();
        var phoneReg = /^1[3|4|5|7|8][0-9]{9}$/;
        if (name.trim() == "") {
            $("#nameMessage").text("*名称不能为空");
            return;
        }
        if (!phoneReg.test(phone)) {
            $("#phoneMessage").text("*电话号码格式不符合");
            return;
        }
        if (address.trim() == "") {
            $("#addressMessage").text("*地址不能为空");
            return;
        }
        if (desc.trim().length < 200) {
            $("#descMessage").text("*描述不少于200字");
            return;
        }
        var len = $("input[type='checkbox']:checked").length;
        if (len <= 0) {
            $("#kingMessage").text("*请选择擅长领域");
            return;
        }
        $.ajax({
            type: "POST",
            dataType: "text",
            url: "/admin/history/savaHistory",
            data: $('#form').serialize(),
            success: function (data) {
                $("input[name='reset']").click();
                layui.use('layer', function () {
                    var layer = layui.layer;
                    layer.msg('保存成功', {
                        icon: 6,
                        time: 3000 //2秒关闭（如果不配置，默认是3秒）
                    },function () {
                        var id=$("#illId").val();
                        if ( id.trim()!="" && id !=undefined && id !=null){
                            window.location.href="http://localhost:8080/history";
                        }
                    });
                });
            }
        });
    }

</script>
</body>
</html>