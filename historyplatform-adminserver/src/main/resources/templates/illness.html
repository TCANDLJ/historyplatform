<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>

	<meta charset="utf-8">
    <title>admin 后台管理</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="http://fonts.googleapis.com/css?family=Oxygen|Marck+Script" rel="stylesheet" type="text/css">
    <link href="/assets/css/bootstrap.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.css" rel="stylesheet">
    <link href="/assets/css/admin.css" rel="stylesheet">
    <link href="/layui/css/layui.css">
    <script type="text/javascript">
        
        

    </script>
    <style type="text/css">
       #picture p{
        color: red;
       }
        #save:hover{
        cursor: pointer;
      }
 
    </style>
</head>    
<body>

<div class="container">
		
	<div class="row">
        <div th:replace="head::minHead"></div>
	<div class="span10">
	<div class="secondary-masthead">
		<ul class="nav nav-pills pull-right">
			<li>
                <a href="/index/loginout"><i class="icon-globe"></i> Logout</a>
			</li>
		</ul>

		<ul class="breadcrumb">
			<li>
				<a href="#">Admin</a> <span class="divider">/</span>
			</li>
			<li class="active">疾病信息</li>
		</ul>
	</div>
	</div> 

     <div id="picture" style="width: 970px;height: 800px;margin-left: 230px;margin-top: 100px;">
         <form>
             <input id="illId" type="hidden" name="id" th:value="${illness ne null?illness.id:null}"/>
         <div style="width: 970px;height: 40px;line-height: 40px;">

           <span style="float: left;">疾病名称：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 200px;height: 40px;float: left;">
               <input id="illnessName" name="name" th:value="${illness ne null?illness.name:null}" type="text" style="width: 200px;"/>
           </div>
           <div style="width: 100px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="nameMessage"></p></div>
         </div><br>
        
        <div style="width: 970px;height: 40px;line-height: 40px;">
           <span style="float: left;">病因描述：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 400px;height: 40px;float: left;">
              <textarea id="illnessEtiology" name="etiology" th:text="${illness ne null?illness.etiology:null}" rows="3" style="width: 400px;">
              </textarea>       
           </div>
            <div style="width: 200px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="etiologyMessage"></p></div>
         </div><br><br><br><br>
          <div style="width: 970px;height: 40px;line-height: 40px;">
           <span style="float: left;">病情症状：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 400px;height: 40px;float: left;">
              <textarea id="illness" name="illness" th:text="${illness ne null?illness.illness:null}" rows="5" style="width: 400px;">
              </textarea>       
           </div>
              <div style="width: 200px;height: 40px;float: left;margin-left: 20px;line-height: 40px;"><p id="illnessMessage"></p></div>
         </div><br><br><br><br>
          <div style="width: 970px;height: 100px;line-height: 40px;">
           <span style="float: left;">属于科室：&nbsp;&nbsp;&nbsp;</span>
           <div style="width: 800px;height: 100px;float: left;">
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',1,'))?true:false}" value="1">皮肤性病科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',2,'))?true:false}" value="2">消化内科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',3,'))?true:false}" value="3">内分泌科</input>
                <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',4,'))?true:false}" value="4">呼吸内科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',5,'))?true:false}" value="5">妇产科</input><br>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',6,'))?true:false}" value="6">眼科</input>
                <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',7,'))?true:false}" value="7">肝胆胰腺外科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',8,'))?true:false}" value="8">风湿免疫科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',9,'))?true:false}" value="9">泌尿外科</input><br>
                <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',10,'))?true:false}" value="10">普通内科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',11,'))?true:false}" value="11">普外科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',12,'))?true:false}" value="12">儿科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',13,'))?true:false}" value="13">神经内科</input>
               <input type="checkbox" name="kinds" th:attr="checked=${(illness ne null && (','+illness.kinds+',').contains(',14,'))?true:false}" value="14">其他</input>
           </div>
              <div style="width: 200px;height: 40px;float: left;margin-left: 500px;line-height: 40px;"><p id="kingMessage"></p></div>
              <input type="reset" name="reset" style="display: none;" />
         </div>
      </div>
        </form>
     </div>
	</div> 
</div> 
 <div id="save" onclick="saveIllness()" style="background-color: red;width: 40px;height: 20px;border-radius: 10px;text-align: center;line-height: 20px;margin-left: 200px;margin-top: -380px;"><p style="color: white;font-size: 10px;">保存</p></div>
 <script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/bootstrap.js"></script>
<script src="/layui/layui.js"></script>
<script  type="text/javascript">
    function saveIllness() {
        var name = $("#illnessName").val();
        var etiology = $("#illnessEtiology").val();
        var illness = $("#illness").val();
        if (name.trim() == "") {
            $("#nameMessage").text("*名称不能为空");
            return;
        }
        if (etiology.trim() == "") {
            $("#etiologyMessage").text("*病因不能为空");
            return;
        }
        if (illness.trim().length < 100) {
            $("#illnessMessage").text("*描述不少于100字");
            return;
        }
        var len = $("input[type='checkbox']:checked").length;
        if (len <= 0) {
            $("#kingMessage").text("*请选择病情属于科室");
            return;
        }
        $.ajax({
            type: "POST",
            dataType: "text",
            url: "/admin/illness/saveIllness",
            data: $('form').serialize(),
            success: function (data) {
                $("input[name='reset']").click();
                layui.use('layer', function () {
                    var layer = layui.layer;
                    layer.msg('保存成功', {
                        icon: 6,
                        time: 3000 //2秒关闭（如果不配置，默认是3秒）
                    },function () {
                        var id=$("#illId").val();
                        if ( id.trim()!="" && id !=undefined && id !=null){
                            window.location.href="http://localhost:8080/illness";
                        }
                    });
                });
            }
        });
    }
</script>
</body>
</html>